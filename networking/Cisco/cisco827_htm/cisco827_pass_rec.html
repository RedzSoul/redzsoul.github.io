<html>

<!-- Mirrored from www.di-srv.unisa.it/~ads/corso-security/www/CORSO-0203/Cisco/cisco827_htm/cisco827_pass_rec.htm by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 08 Oct 2019 08:59:40 GMT -->
<head>
<title>Password recovery</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>

<body bgcolor="#FFFFFF" text="#000000" background="../sfondo.jpg">
<h1 align="left"><font face="Verdana, Arial, Helvetica, sans-serif"><em>PASSWORD 
  RECOVERY</em></font></h1>
<p align="justify"><font size="-1" face="Verdana, Arial, Helvetica, sans-serif">Pu&ograve; 
  succedere, per vari motivi, che venga smarrita la password di accesso al router 
  e si voglia recuperarla per riprenderne il controllo. La procedura non &egrave; 
  uguale per tutti i modelli, ma questa descritta, relativa ad modello Cisco 827, 
  &egrave; utile a livello di filosofia e preserva la maggior parte dei comandi. 
  E' chiaro che, da un punto di vista di sicurezza, il router deve stare SEMPRE 
  chiuso in un armadio con accessibilit&agrave; garantita ai soli amministratori.</font></p>
<p align="justify"><font size="-1" face="Verdana, Arial, Helvetica, sans-serif">Per 
  default il registro di configurazione che risiede nella <a href="../cisco_htm/cisco_comp_princ.html#nvram">NVRAM</a> 
  &egrave; settato con il valore esadecimale 0x2102. Per visualizzare questo valoreo 
  &egrave; sufficente digitare il comando &quot;<em><strong>Router# Show ver</strong></em>&quot; 
  dove l'ultima riga di visualizzazione ci mostrer&agrave; il valore del registro:</font></p>
<TABLE width="73%" border=1 align="center" cellPadding=0 cellSpacing=0 
                  borderColor=#111111 
                  bgColor=#000000 id=AutoNumber2 style="BORDER-COLLAPSE: collapse">
  <TBODY>
    <TR> 
      <TD width="100%"><p><font color="#FFFFFF" size="-1" face="Verdana, Arial, Helvetica, sans-serif">Cisco827#show 
          ver<br>
          .<br>
          .<br>
          .</font></p>
        <p><font color="#FFFFFF" size="-1" face="Verdana, Arial, Helvetica, sans-serif">1 
          Ethernet/IEEE 802.3 interface(s)<br>
          1 ATM network interface(s)<br>
          128K bytes of non-volatile configuration memory.<br>
          8192K bytes of processor board System flash (Read/Write)<br>
          2048K bytes of processor board Web flash (Read/Write)</font></p>
        <p><font color="#FFFFFF" size="-1" face="Verdana, Arial, Helvetica, sans-serif">Configuration 
          register is 0x2102</font></p></TD>
    </TR>
  </TBODY>
</TABLE>
<p align="justify">&nbsp;</p>
<p align="justify"><font size="-1" face="Verdana, Arial, Helvetica, sans-serif">Per 
  default gli ultimi bit di questo registro (composto da 16 bit) corrispondono 
  al valore: 10000100000010.<br>
  Per i nostri usi risulta particolarmente importante il valore del settimo bit 
  che &egrave; settato a 0 (n.b. si legge da dx verso sx).<br>
  Con questo settaggio, infatti, si forza il caricamento della configurazione 
  salvata nella <a href="../cisco_htm/cisco_comp_princ.html#nvram">NVRAM</a>.</font></p>
<p align="justify"><font size="-1" face="Verdana, Arial, Helvetica, sans-serif">Se 
  invece si setta il registro con la forma esadecimale 0x2142 (10000101000010) 
  il famoso settimo bit viene settato a 1 e si escluder&agrave; quindi il caricamento 
  dell'IOS dalla <a href="../cisco_htm/cisco_comp_princ.html#flash">Flash</a> e 
  della configurazione dalla <a href="../cisco_htm/cisco_comp_princ.html#nvram">NVRAM</a>.<br>
  Il sistema allora si aviver&agrave; finalmente senza <a href="../glossario_htm/glossario.html#ios">IOS</a> 
  e senza configurazione e va da se che in assenza di questi elementi la password 
  non verr&agrave; richiesta. Il sistema quindi si presenter&agrave; in uno stato 
  ibrido detto: <a href="cisco827_rommon.html">ROM monitor</a>.</font></p>
<p align="justify"><font size="-1" face="Verdana, Arial, Helvetica, sans-serif">Per 
  poter effettuare questa opzione i passi da percorrere sono i seguenti:</font></p>
<p align="justify"><font size="-1" face="Verdana, Arial, Helvetica, sans-serif">1) 
  Riavviare il router.</font></p>
<TABLE width="73%" border=1 align="center" cellPadding=0 cellSpacing=0 
                  borderColor=#111111 
                  bgColor=#000000 id=AutoNumber2 style="BORDER-COLLAPSE: collapse">
  <TBODY>
    <TR> 
      <TD width="100%"><p><font color="#FFFFFF" size="-1" face="Verdana, Arial, Helvetica, sans-serif">System 
          Bootstrap, Version 12.2(4r)XM2, RELEASE SOFTWARE (fc1)<br>
          TAC Support: http://www.cisco.com/tac<br>
          Copyright (c) 2002 by cisco Systems, Inc.<br>
          C800/SOHO series (Board ID: 9-62) platform with 16384 Kbytes of main 
          memory.</font></p></TD>
    </TR>
  </TBODY>
</TABLE>
<p>&nbsp;</p>
<p align="justify"><font size="-1" face="Verdana, Arial, Helvetica, sans-serif"> 
  2) Collegarsi al router in modalit&agrave; console con il cavo apposito.<br>
  3) Entro 60 secondi premere CTRL+Break (CTRL+PAUSE) dal terminale collegato.</font></p>
<TABLE width="73%" border=1 align="center" cellPadding=0 cellSpacing=0 
                  borderColor=#111111 
                  bgColor=#000000 id=AutoNumber2 style="BORDER-COLLAPSE: collapse">
  <TBODY>
    <TR> 
      <TD width="100%"><p align="justify"><font color="#FFFFFF" size="-1" face="Verdana, Arial, Helvetica, sans-serif">System 
          Bootstrap, Version 12.2(4r)XM2, RELEASE SOFTWARE (fc1)<br>
          TAC Support: http://www.cisco.com/tac<br>
          Copyright (c) 2002 by cisco Systems, Inc.<br>
          C800/SOHO series (Board ID: 9-62) platform with 16384 Kbytes of main 
          memory</font></p>
        <p><font color="#FFFFFF" size="-1" face="Verdana, Arial, Helvetica, sans-serif">program 
          load complete, entry point: 0x80013000, size: 0x3a8cfc<br>
          Self decompressing the image : #################<br>
          monitor: command &quot;boot&quot; aborted due to user interrupt</font></p>
        <p align="justify"><font color="#FFFFFF" size="-1" face="Verdana, Arial, Helvetica, sans-serif"><br>
          rommon 1 &gt; confreg 0x2142</font></p>
        <p><font color="#FFFFFF" size="-1" face="Verdana, Arial, Helvetica, sans-serif">You 
          must reset or power cycle for new config to take effect</font></p>
        <p><font color="#FFFFFF" size="-1" face="Verdana, Arial, Helvetica, sans-serif">rommon 
          2 &gt; reset</font></p></TD>
    </TR>
  </TBODY>
</TABLE>
<p></p>
<p align="justify"><font size="-1" face="Verdana, Arial, Helvetica, sans-serif"><br>
  4) Si presenter&agrave; un nuovo prompt ibrido, senza il nome del router in 
  modalit&agrave; <a href="cisco827_rommon.html">ROM monitor</a> (senza IOS).</font></p>
<TABLE width="73%" border=1 align="center" cellPadding=0 cellSpacing=0 
                  borderColor=#111111 
                  bgColor=#000000 id=AutoNumber2 style="BORDER-COLLAPSE: collapse">
  <TBODY>
    <TR> 
      <TD width="100%"><FONT face=Verdana, Arial, Helvetica, sans-serif color=#ffffff 
                        size=-1>.......<BR>
        <BR>
        &gt;</FONT></TD>
    </TR>
  </TBODY>
</TABLE>
<p align="justify">&nbsp;</p>
<P class=normal align=justify><font size="-1" face="Verdana, Arial, Helvetica, sans-serif">5) 
  Per modificare il registro di configurazione, digitare &quot;<em><strong>config-register&nbsp; 
  0x2142</strong></em>&quot; e premere Invio.<BR>
  6) Digitare <em><strong>i</strong></em> e premere Invio.</font></P>
<P class=normal align=justify><font size="-1" face="Verdana, Arial, Helvetica, sans-serif">Apparirà 
  il tipico System bootstrap che ci porterà alla "System configuration dialog", 
  una mascherà interattiva che ci chiederà se vogliamo configurare ex-novo il router. 
  A questa domanda risponderemo NO (comando <em><strong>n</strong></em>), e apparirà 
  un nuovo prompt: </font></P>
<TABLE width="73%" border=1 align="center" cellPadding=0 cellSpacing=0 
                  borderColor=#111111 
                  bgColor=#000000 id=AutoNumber2 style="BORDER-COLLAPSE: collapse">
  <TBODY>
    <TR> 
      <TD width="100%"><p> <font color="#FFFFFF" size="-1" face="Verdana, Arial, Helvetica, sans-serif">--- 
          System Configuration Dialog ---</font></p>
        <p><font color="#FFFFFF" size="-1" face="Verdana, Arial, Helvetica, sans-serif">Would 
          you like to enter the initial configuration dialog? [yes/no]: n</font></p>
        <p><font color="#FFFFFF" size="-1" face="Verdana, Arial, Helvetica, sans-serif">Press 
          RETURN to get started!</font></p>
        <p><font color="#FFFFFF" size="-1" face="Verdana, Arial, Helvetica, sans-serif">.........</font></p>
        <p><font color="#FFFFFF" size="-1" face="Verdana, Arial, Helvetica, sans-serif">Router&gt;<br>
          </font></p>
        </TD>
    </TR>
  </TBODY>
</TABLE>
<p>&nbsp;</p>
<P class=normal align=justify><font size="-1" face="Verdana, Arial, Helvetica, sans-serif">7) 
  Digitare &quot;<em><strong>ena</strong></em>&quot; per passare alla modalità 
  privilegiata. Ovviamente non ci verrà richiesta la password perchè il sistema 
  è privo di configurazione. (Questa situazione può esserre analizzata con il 
  comando &quot;<strong><em>sh run</em></strong>&quot;)<BR>
  8) A questo punto possiamo decidere di copiare la configurazione presente in 
  <a href="../cisco_htm/cisco_comp_princ.html#flash">Flash</a> e rendere operativo 
  il router e, OVVIAMENTE cambiare la password:<BR>
  a) &quot;<em><strong>copy startup-config running-config</strong></em>&quot; 
  o &quot;<em><strong>copy start run</strong></em>&quot;<FONT color=#ff0000><BR>
  </FONT>b) passare in modalità di configurazione con il comando<FONT color=#ff0000> 
  </FONT>&quot;<em><strong>config t</strong></em>&quot;<FONT color=#ff0000><BR>
  </FONT>c) digitare &quot;<em><strong>enable secret nuovapassword</strong></em>&quot;</font></P>
<P class=normal align=justify><font size="-1" face="Verdana, Arial, Helvetica, sans-serif">9) 
  Salvare la configurazione corrente nella Flash con il comando &quot;<em><strong>copy 
  running-config startup-config</strong></em>&quot; o &quot;<em><strong>write 
  mem</strong></em>&quot;.<BR>
  10) Cambiare i settaggi del registro di configurazione e riportarli ai valori 
  di default con il comando &quot;<em><strong>config-register 0x2102</strong></em>&quot;<BR>
  <BR>
  A questo punto siamo pronti per riavviare il router con la nuova configurazione 
  e la nuova password.</font></P>
<p align="justify"></p>
<p align="justify">&nbsp; </p>
</body>

<!-- Mirrored from www.di-srv.unisa.it/~ads/corso-security/www/CORSO-0203/Cisco/cisco827_htm/cisco827_pass_rec.htm by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 08 Oct 2019 08:59:40 GMT -->
</html>
